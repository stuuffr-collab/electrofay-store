📌 المطلوب
ربط زرّ السلة في الـHeader بحالة ‎isOpen داخل هوك ‎useCart.

تمرير ‎isOpen و ‎setIsOpen إلى مكوّن ‎CartSidebar حتى تُفتح وتُغلَق السلة بسلاسة.

⚙️ الخطوات التي يجب تنفيذها في الكود
استدعِ هوك ‎useCart في الـHeader

tsx
Copy
Edit
// Header.tsx
import { ShoppingCart } from "lucide-react";
import { useCart } from "@/hooks/use-cart";

export default function Header() {
  const { totalItems, setIsOpen } = useCart();   // ← ربط زر السلة

  return (
    <header className="flex items-center justify-between p-4">
      {/* ... شعار وروابط ... */}

      <button onClick={() => setIsOpen(true)} className="relative">
        <ShoppingCart className="w-6 h-6" />
        {totalItems > 0 && (
          <span className="absolute -top-1 -right-1 bg-electric-yellow text-black rounded-full text-xs px-1">
            {totalItems}
          </span>
        )}
      </button>
    </header>
  );
}
استخدم هوك ‎useCart داخل ‎CartSidebar

tsx
Copy
Edit
// CartSidebar.tsx
import { useCart } from "@/hooks/use-cart";
import { Sheet } from "@/components/ui/sheet";

export default function CartSidebar() {
  const {
    items,
    totalPrice,
    isOpen,
    setIsOpen,
    updateQuantity,
    removeItem,
    clearCart,
  } = useCart();

  return (
    <Sheet open={isOpen} onOpenChange={setIsOpen}>
      {/* محتوى السلة كما هو (قائمة المنتجات، الإجمالي، زر واتساب) */}
    </Sheet>
  );
}
أغلق السلة بعد الإتمام (اختياري)

tsx
Copy
Edit
<Button
  onClick={() => {
    handleWhatsAppCheckout();   // دالتك لفتح واتساب
    setIsOpen(false);           // إغلاق السلة
  }}
  className="w-full ..."
>
  اطلب الآن عبر واتساب
</Button>
تأكّد من استيراد ‎CartSidebar في جذر التطبيق
ضعه مثلاً داخل Layout.tsx أو App.tsx ليكون ظاهرًا في كل الصفحات:

tsx
Copy
Edit
import CartSidebar from "@/components/CartSidebar";

function App() {
  return (
    <>
      <Header />
      <Outlet />      {/* بقية الصفحات */}
      <CartSidebar /> {/* السلة العائمة */}
    </>
  );
}
✅ النتيجة المتوقّعة
ضغط زرّ 🛒 يغيّر ‎isOpen إلى true ويظهر ‎CartSidebar.

الضغط على «×» أو «متابعة التسوق» يرجع ‎isOpen إلى false ويُخفي السلة.

الكمية، الحذف، والإجمالي يتحدّثان لحظيًا بفضل هوك ‎useCart.

ملاحظة: لا تحتاج أي Context إضافي طالما تستعمل نفس هوك ‎useCart داخل كل مكوّن يحتاجه.